<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CityZen - Government Civic Issue Reporting Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Poppins:wght@300;400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
    <!-- Navigation -->
    <nav>
        <div class="container nav-container">
            <div class="logo">
                <i class="fas fa-landmark"></i>
                <span>CityZen</span>
            </div>


            <ul class="nav-links">
                <a href="/"><span>Home</span></a>
                <a href="/report"><span>Report</span></a>
                <a href="/community"><span>Community</span></a>
                <a href="/about"><span>About</span></a>
                {% if session.get('role') == 'user' %}
                <button class="login-btn">User ‚ñæ</button>
                <ul class="dropdown">
                    <li><a href="/mycomplaints">My Complaints</a></li>
                    <li><a href="/logout">Logout</a></li>
                </ul>

                {% elif session.get('role') == 'admin' %}
                <button class="login-btn">Admin ‚ñæ</button>
                <ul class="dropdown">
                    <li><a href="/admin_dashboard">Dashboard</a></li>
                    <li><a href="/logout">Logout</a></li>
                </ul>
                {% else %}
                <button class="login-btn">Login ‚ñæ</button>
                <ul class="dropdown">
                    <li><a href="/user_login">User Login</a></li>
                    <li><a href="/admin_login">Admin Login</a></li>
                </ul>
                {% endif %}
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1>Turning Complaints into Data, and Data into Solutions</h1>
                <p>Quick reporting that takes only a few taps.
                    Get instant updates and real change.</p>
                <a href="/report" class="btn">Report an Issue</a>
            </div>
        </div>
        <div class="hero-image">
            <img src="{{ url_for('static', filename='images/imagelogohome.png') }}" alt="Community Illustration">
        </div>

    </section>

    <!-- Categories Section -->
    <section class="categories">
        <div class="container">
            <div class="section-title">
                <h2>Issue Categories</h2>
            </div>

            <div class="categories-grid">
                <div class="category-card">
                    <div class="category-icon">
                        <i class="fas fa-road"></i>
                    </div>
                    <h3>Roads & Infrastructure</h3>
                    <p>Report potholes, damaged roads, street light issues, and other infrastructure problems.</p>
                </div>

                <div class="category-card">
                    <div class="category-icon">
                        <i class="fas fa-trash-alt"></i>
                    </div>
                    <h3>Sanitation</h3>
                    <p>Report garbage collection issues, overflowing bins, and sanitation concerns in your area.</p>
                </div>

                <div class="category-card">
                    <div class="category-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Public Safety</h3>
                    <p>Report safety hazards, broken public equipment, and other security concerns.</p>
                </div>

                <div class="category-card">
                    <div class="category-icon">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <h3>Environment</h3>
                    <p>Report pollution, tree maintenance, water logging, and other environmental issues.</p>
                </div>

                <div class="category-card">
                    <div class="category-icon">
                        <i class="fas fa-hospital"></i>
                    </div>
                    <h3>Healthcare</h3>
                    <p>Report public health concerns, clinic issues, and sanitation problems in healthcare facilities.
                    </p>
                </div>

                <div class="category-card">
                    <div class="category-icon">
                        <i class="fas fa-school"></i>
                    </div>
                    <h3>Education</h3>
                    <p>Report issues with public schools, educational resources, and related infrastructure.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- How it Works Section -->
    <section class="how-it-works">
        <div class="container">
            <div class="section-title">
                <h2>How It Works</h2>
            </div>

            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3>Identify Issue</h3>
                    <p>Notice a civic issue that needs attention in your community.</p>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <h3>Report Online</h3>
                    <p>Use our platform to submit a detailed report with photos and location.</p>
                </div>

                <div class="step">
                    <div class="step-number">3</div>
                    <h3>Track Progress</h3>
                    <p>Monitor the status of your report until the issue is resolved.</p>
                </div>

                <div class="steps-connector"></div>


            </div>
            <!-- YouTube Video Embed -->
        </div>
        <div class="how-it-works-video">
            <video controls>
                <source
                    src="{{ url_for('static', filename='images/howitworks.mp4') }}"
                    type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
        </div>
    </section>
    <!-- Message from the Team Section -->
    <section class="team-message">
        <div class="container">
            <div class="section-title">
                <h2>üèô Together for a Better City</h2>
            </div>

            <div class="message-box">
                <p>Every day we see problems around us ‚Äî overflowing garbage bins, potholes, broken streetlights, unsafe
                    roads, water issues. Too often, we just shake our heads and move on, waiting for ‚Äúsomeone‚Äù to fix
                    them.</p>

                <p><strong>But here‚Äôs the truth:</strong> change begins with us.
                    The government cannot solve problems it doesn‚Äôt know about. By reporting civic issues, you give
                    authorities the power to act faster and more effectively.</p>

                <h3>üì¢ Why Report?</h3>
                <ul>
                    <li>‚úî Ensure your complaint reaches the right department.</li>
                    <li>‚úî Speed up problem-solving in your neighborhood.</li>
                    <li>‚úî Build a stronger connection between citizens and government.</li>
                </ul>

                <h3>üå± Our Shared Responsibility</h3>
                <ul>
                    <li>‚úî Keep our surroundings clean</li>
                    <li>‚úî Respect and protect public spaces</li>
                    <li>‚úî Take part in community efforts</li>
                    <li>‚úî Inspire others to take responsibility</li>
                </ul>

                <p class="highlight">‚ú® This platform is your voice. Use it. Report issues. Take action. Together, we
                    create the city we dream of.</p>

                <div class="hashtags">#ReportToRepair #MyCityMyDuty #BeTheChange</div>
            </div>
        </div>
    </section>

    <!-- Awareness Section -->
    <section class="awareness">
        <div class="container">
            <div class="section-title">
                <h2>Civic Awareness</h2>
                <p>Awareness builds responsibility. Let‚Äôs work together to create cleaner, safer, and stronger
                    communities.</p>
            </div>

            <div class="awareness-list">
                <div class="awareness-item">
                    <div class="icon">üóë</div>
                    <h3>Cleanliness is Everyone‚Äôs Duty</h3>
                    <p>A clean city starts with clean habits. Dispose of waste responsibly. Do not litter. Your small
                        act keeps your community healthy.</p>
                </div>

                <div class="awareness-item">
                    <div class="icon">üö¶</div>
                    <h3>Road & Traffic Discipline</h3>
                    <p>Obey traffic rules. Don‚Äôt block roads. Report broken signals or dangerous spots. Safe roads save
                        lives.</p>
                </div>

                <div class="awareness-item">
                    <div class="icon">üíß</div>
                    <h3>Water Conservation</h3>
                    <p>Every drop counts. Fix leaks, avoid wastage, and report water supply issues. Conserving today
                        secures tomorrow.</p>
                </div>

                <div class="awareness-item">
                    <div class="icon">üå≥</div>
                    <h3>Protecting Public Spaces</h3>
                    <p>Parks, footpaths, and public facilities belong to everyone. Respect and protect them‚Äîit‚Äôs your
                        right and your responsibility.</p>
                </div>

                <div class="awareness-item">
                    <div class="icon">‚ôª</div>
                    <h3>Reduce, Reuse, Recycle</h3>
                    <p>Waste less, recycle more. The less we throw, the more we save‚Äîfor our environment and our future.
                    </p>
                </div>

                <div class="awareness-item">
                    <div class="icon">üí°</div>
                    <h3>Active Citizenship</h3>
                    <p>Don‚Äôt just wait for change‚Äîbe part of it. Report civic issues, join local initiatives, and
                        inspire others to act.</p>
                </div>

                <div class="awareness-item">
                    <div class="icon">üîí</div>
                    <h3>Safety & Security</h3>
                    <p>If you see something unsafe‚Äîwhether it‚Äôs a broken streetlight, open manhole, or suspicious
                        activity‚Äîreport it immediately. A safe city is a shared responsibility.</p>
                </div>

                <div class="awareness-item">
                    <div class="icon">üèò</div>
                    <h3>Community First</h3>
                    <p>Strong communities are built when citizens care for each other. Encourage neighbors to
                        participate in solving local issues.</p>
                </div>
            </div>
        </div>
    </section>
    <!-- Testimonials Section -->
    <section class="testimonials">
        <div class="container">
            <div class="section-title">
                <h2>Community Testimonials</h2>
            </div>

            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>"I reported a large pothole on my street and it was fixed within 3 days! This platform really
                            works."</p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-image">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="author-details">
                            <h4>Rajesh Mohanty</h4>
                            <p>Bhubaneswar</p>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>"The sanitation issue in our area was resolved quickly after I reported it. Great service for
                            citizens!"</p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-image">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="author-details">
                            <h4>Priyanka Das</h4>
                            <p>Cuttack</p>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>"I love how I can track the progress of my reports. It makes me feel involved in the
                            process."</p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-image">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="author-details">
                            <h4>Amir Khan</h4>
                            <p>Puri</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">CityZen</div>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 CityZen - Government Civic Issue Reporting Platform. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- CHATBOT WIDGET -->
    <div class="chatbot-container">
        <div class="chat-widget" id="chat-widget">
            <div class="chat-header">
                <h3>Citra</h3>
                <button class="close-btn" id="close-chat-btn">&times;</button>
            </div>
            <div class="chat-messages" id="chat-messages">
                <!-- Initial message will be populated by JS -->
            </div>
            <div class="chat-input-area">
                <input type="text" id="chat-input" placeholder="Type your message...">
                <button id="chat-send-btn"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
        <button class="chat-fab" id="chat-fab">
            <i class="fas fa-comments"></i>
        </button>
    </div>
    <!-- END CHATBOT WIDGET -->
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const chatFab = document.getElementById('chat-fab');
            const chatWidget = document.getElementById('chat-widget');
            const closeChatBtn = document.getElementById('close-chat-btn');
            const chatInput = document.getElementById('chat-input');
            const chatSendBtn = document.getElementById('chat-send-btn');
            const chatMessages = document.getElementById('chat-messages');
    
            // Toggle chat widget visibility
            chatFab.addEventListener('click', () => {
                chatWidget.classList.toggle('active');
            });
    
            closeChatBtn.addEventListener('click', () => {
                chatWidget.classList.remove('active');
            });
    
            const addMessage = (sender, text) => {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message', sender);
                messageDiv.innerHTML = text.replace(/\n/g, '<br>');
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            };

            const addOptions = (options) => {
                const existingOptions = document.querySelector('.chat-options');
                if (existingOptions) {
                    existingOptions.remove();
                }

                const optionsContainer = document.createElement('div');
                optionsContainer.classList.add('chat-options');

                options.forEach(optionText => {
                    const button = document.createElement('button');
                    button.textContent = optionText;
                    button.classList.add('option-btn');
                    button.addEventListener('click', () => {
                        chatInput.value = optionText;
                        sendMessage();
                    });
                    optionsContainer.appendChild(button);
                });
                chatMessages.appendChild(optionsContainer);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            };
    
            const sendMessage = async () => {
                const messageText = chatInput.value.trim();
                if (!messageText) return;
    
                const existingOptions = document.querySelector('.chat-options');
                if (existingOptions) {
                    existingOptions.remove();
                }

                addMessage('user', messageText);
                chatInput.value = '';
    
                try {
                    const response = await fetch('/chat', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ message: messageText }),
                    });
                    const data = await response.json();
                    addMessage('bot', data.response);
                    if (data.options && data.options.length > 0) {
                        addOptions(data.options);
                    }
                } catch (error) {
                    console.error('Chatbot Error:', error);
                    addMessage('bot', 'Sorry, something went wrong. Please try again later.');
                }
            };
            
            chatSendBtn.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', (event) => {
                if (event.key === 'Enter') {
                    sendMessage();
                }
            });

            // Fetch initial greeting from bot when page loads
            const initialGreeting = async () => {
                 try {
                    const response = await fetch('/chat', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ message: "initial_greeting" }),
                    });
                    const data = await response.json();
                    addMessage('bot', data.response);
                    if (data.options && data.options.length > 0) {
                        addOptions(data.options);
                    }
                } catch (error) {
                    console.error('Initial Greeting Error:', error);
                    addMessage('bot', 'Failed to connect. Please try again later.');
                }
            };
            initialGreeting();

        });
    </script>
</body>

</html>


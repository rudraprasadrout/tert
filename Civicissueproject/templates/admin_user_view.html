<!-- templates/admin_user_view.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>User {{ user_phone }} - Complaints</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin_styles.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <header class="admin-header">
    <h1><i class="fas fa-user"></i> User: {{ user_phone }}</h1>
    <div><a class="btn" href="{{ url_for('admin_dashboard') }}"><i class="fas fa-arrow-left"></i> Back</a></div>
  </header>

  <main class="admin-main">
    <section class="complaints-list">
      {% for row in complaints %}
      <div class="mini-card">
        <div>
          <strong>#{{ row[0] }}</strong> - 
          <span class="pill {{ (row[13] or 'Pending')|lower|replace(' ', '-') }}">
            {{ row[13] or 'Pending' }}
          </span>
        </div>
        <div>
          {{ (row[12] or '')[:120] ~ ('...' if row[12] and row[12]|length > 120 else '') }}
        </div>
        <div style="margin-top:8px;">
          <a class="btn small" href="{{ url_for('admin_complaint_view', cid=row[0]) }}">
            <i class="fas fa-eye"></i> Open
          </a>
        </div>
      </div>
      {% else %}
      <p>No complaints from this user.</p>
      {% endfor %}
    </section>
  </main>
</body>
</html>
